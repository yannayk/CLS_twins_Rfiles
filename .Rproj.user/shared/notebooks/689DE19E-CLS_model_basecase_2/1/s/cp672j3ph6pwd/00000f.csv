"0","## Baseline mortality rate (Canada 2020 data) "
"0","mort_data <- read.table(""Data/Canada_mort_data.txt"", header = TRUE)"
"0",""
"0","# Mortality data for latest available year (2020) and for ages 0-99"
"0","v_r_mort <- mort_data %>%"
"0","  mutate_if(is.character, as.numeric) %>%"
"0","  filter(Year == 2020, Age <= (n_age_max - 1)) %>%"
"0","  select(qx) %>%"
"0","  as.matrix()"
"0",""
"0","## Hazard ratios of mortality by age group and GA group (Crump 2019)"
"0",""
"0","# Age 0 to <1"
"0","hr_AD_28_01 <- 236.32"
"0","hr_AD_32_01 <- 32.1"
"0","hr_AD_34_01 <- 32.1"
"0","hr_AD_37_01 <- 6.75"
"0","hr_AD_term_01 <- 1"
"0",""
"0","# Age 1 to 9"
"0","length_19 <- 9-1+1"
"0","hr_AD_28_19 <- 4.52"
"0","hr_AD_32_19 <- 3.26"
"0","hr_AD_34_19 <- 3.26"
"0","hr_AD_37_19 <- 1.9"
"0","hr_AD_term_19 <- 1"
"0",""
"0","# Age 10 to 19 "
"0","length_1019 <- 19-10+1"
"0","hr_AD_28_1019 <- 1.89"
"0","hr_AD_32_1019 <- 1.91"
"0","hr_AD_34_1019 <- 1.91"
"0","hr_AD_37_1019 <- 1.37 "
"0","hr_AD_term_1019 <- 1"
"0",""
"0","# Age 20-29 "
"0","length_2029 <- 29-20+1"
"0","hr_AD_28_2029 <- 2.12"
"0","hr_AD_32_2029 <- 1.42"
"0","hr_AD_34_2029 <- 1.42"
"0","hr_AD_37_2029 <- 1.35"
"0","hr_AD_term_2029 <- 1"
"0",""
"0","# Age 30-45"
"0","length_3045 <- 45-30+1"
"0","hr_AD_28_3045 <- 2.04"
"0","hr_AD_32_3045 <- 1.48"
"0","hr_AD_34_3045 <- 1.48"
"0","hr_AD_37_3045 <- 1.22"
"0","hr_AD_term_3045 <- 1"
"0",""
"0","# Plateau from 46-100 (all resolve to 1)"
"0","length_100 <- 100-46"
"0","hr_final <- 1"
"0",""
"0","## Mortality age-dependent hazard ratios by GA category # Labels ex. ""Very preterm"" from the source paper"
"0",""
"0","# Extremely preterm (< 28 wks)"
"0","v_hr_AD_28 <- c(hr_AD_28_01, "
"0","                rep(hr_AD_28_19, length_19), "
"0","                rep(hr_AD_28_1019, length_1019),"
"0","                rep(hr_AD_28_2029, length_2029), "
"0","                rep(hr_AD_28_3045, length_3045),"
"0","                seq(from = hr_AD_28_3045, to = hr_final, length.out = length_100))"
"0",""
"0","# Very preterm (28-33 wks)"
"0","v_hr_AD_32 <- c(hr_AD_32_01, "
"0","                rep(hr_AD_32_19, length_19), "
"0","                rep(hr_AD_32_1019, length_1019),"
"0","                rep(hr_AD_32_2029, length_2029), "
"0","                rep(hr_AD_32_3045, length_3045),"
"0","                seq(from = hr_AD_32_3045, to = hr_final, length.out = length_100))"
"0",""
"0","# Very preterm (28-33 wks)"
"0","v_hr_AD_34 <- c(hr_AD_34_01, "
"0","                rep(hr_AD_34_19, length_19), "
"0","                rep(hr_AD_34_1019, length_1019),"
"0","                rep(hr_AD_34_2029, length_2029), "
"0","                rep(hr_AD_34_3045, length_3045),"
"0","                seq(from = hr_AD_34_3045, to = hr_final, length.out = length_100))"
"0",""
"0","# Late pre-term (34-36)"
"0","v_hr_AD_37 <- c(hr_AD_37_01, "
"0","                rep(hr_AD_37_19, length_19), "
"0","                rep(hr_AD_37_1019, length_1019),"
"0","                rep(hr_AD_37_2029, length_2029), "
"0","                rep(hr_AD_37_3045, length_3045),"
"0","                seq(from = hr_AD_37_3045, to = hr_final, length.out = length_100))"
"0",""
"0","# Term"
"0","v_hr_AD_term <- c(hr_AD_term_01, "
"0","                  rep(hr_AD_term_19, length_19), "
"0","                  rep(hr_AD_term_1019, length_1019),"
"0","                  rep(hr_AD_term_2029, length_2029), "
"0","                  rep(hr_AD_term_3045, length_3045),"
"0","                  seq(from = hr_AD_term_3045, to = hr_final, length.out = length_100))"
"0",""
"0","df_hr <- data.frame(age = c(0:99),"
"0","                    hr_28 = v_hr_AD_28,"
"0","                    hr_32 = v_hr_AD_32,"
"0","                    hr_34 = v_hr_AD_34,"
"0","                    hr_37 = v_hr_AD_37,"
"0","                    hr_term = v_hr_AD_term)"
"0","                    "
"0","# Visual check for HR vectors (note the ylim)"
"0","ggplot(data = df_hr, aes(x = age)) +"
"0","  geom_line(aes(y = hr_28), color = ""darkgreen"") +"
"0","  geom_line(aes(y = hr_32), color = ""darkblue"") +"
"0","  geom_line(aes(y = hr_34), color = ""darkred"") +"
"0","  geom_line(aes(y = hr_37), color = ""orange"") +"
"0","  geom_line(aes(y = hr_term), color = ""pink"") +"
"0","  #ylim(c(0, 30)) +"
"0","  labs(x = ""Age"", "
"0","       y = ""Hazard ratio of death"","
"0","       title = ""Age-dependent hazard ratios by GA category"") +"
"0","  theme_bw()"
